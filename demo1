import dayjs from "dayjs";
import { BackhaulLogModel } from "../../domain/backhaul-logging/models";
import { PlatformType } from "../../domain/misc/models";
import { BackhaulType } from "../../domain/system-status/models";

export const parseBackhaulLogApiResponse = (data: string, platformType: PlatformType): BackhaulLogModel[] => {
  if (data.length === 0) {
    return [];
  }
  const lineSeparator = "\u2551";
  const valueSeparator = "\u2588";
  const trimmedData = data.trim();
  const splitList = trimmedData
    .split(lineSeparator)
    .slice(0, trimmedData[trimmedData.length - 1] === lineSeparator ? -1 : undefined);
  const temp = splitList
    .map((val) => {
      const splitVal = val.split(valueSeparator);
      const dateTimeString = splitVal[0].trim();
      if (!dateTimeString || !dayjs(dateTimeString).isValid()) {
        return null;
      }
      const dateTime = dayjs(dateTimeString);
      const date = dateTime.format("MM / DD / YY");
      const time = dateTime.format("hh:mm A").toLowerCase();
      if (platformType === PlatformType.Router) {
        return {
          date: date,
          time: time,
          type: convertStringToBackhaulType(splitVal?.[1]?.trim()),
          connectionRate: splitVal?.[2]?.trim(),
          macAddress: splitVal?.[3]?.trim(),
        };
      }
      return {
        date: date,
        time: time,
        type: convertStringToBackhaulType(splitVal?.[1]?.trim()),
        connectionRate: splitVal?.[2]?.trim(),
      };
    })
    .filter((entry): entry is BackhaulLogModel => entry !== null);
  return temp;
};

export const convertStringToBackhaulType = (string: string): BackhaulType => {
  switch (string) {
    case "0":
      return BackhaulType.Ethernet;
    case "1":
      return BackhaulType.Wifi;
    case "2":
      return BackhaulType.Coax;
    default:
      throw new Error(`Unsupported BackhaulType ${string}`);
  }
};


I am getting the following errors 
1. at line where we have given entry is BackhaulLogModel i am getting the following error 
A type predicate's type must be assignable to its parameter's type.
  Type 'BackhaulLogModel' is not assignable to type '{ date: string; time: string; type: BackhaulType; connectionRate: string; macAddress: string; } | { date: string; time: string; type: BackhaulType; connectionRate: string; macAddress?: undefined; } | null'.
    Type 'BackhaulLogModel' is not assignable to type '{ date: string; time: string; type: BackhaulType; connectionRate: string; macAddress: string; } | { date: string; time: string; type: BackhaulType; connectionRate: string; macAddress?: undefined; }'.
      Property 'type' is missing in type 'BackhaulLogModel' but required in type '{ date: string; time: string; type: BackhaulType; connectionRate: string; macAddress?: undefined; }'.

2.At return temp i am getting this error Type  '({ date: string; time: string; type: BackhaulType; connectionRate: string; macAddress: string; } | { date: string; time: string; type: BackhaulType; connectionRate: string; macAddress?: undefined; } | null)[]' is not assignable to type 'BackhaulLogModel[]'.
  Type '{ date: string; time: string; type: BackhaulType; connectionRate: string; macAddress: string; } | { date: string; time: string; type: BackhaulType; connectionRate: string; macAddress?: undefined; } | null' is not assignable to type 'BackhaulLogModel'.
    Type 'null' is not assignable to type 'BackhaulLogModel'.
